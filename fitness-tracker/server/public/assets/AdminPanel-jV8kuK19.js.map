{"version":3,"file":"AdminPanel-jV8kuK19.js","sources":["../../src/components/AdminPanel.vue"],"sourcesContent":["<template>\n  <div v-if=\"isAdmin\" class=\"admin-page\">\n    <h2>Admin Panel</h2>\n\n    <section class=\"form-section\">\n      <h3>{{ selectedUser ? 'Edit User' : 'Add New User' }}</h3>\n      <form @submit.prevent=\"selectedUser ? updateUser() : addUser()\">\n        <input v-model=\"formUser.username\" type=\"text\" placeholder=\"Username\" required />\n        <input\n          v-if=\"!selectedUser\"\n          v-model=\"formUser.password\"\n          type=\"password\"\n          placeholder=\"Password\"\n          required\n        />\n        <select v-model=\"formUser.role\">\n          <option value=\"user\">User</option>\n          <option value=\"admin\">Admin</option>\n        </select>\n        <div class=\"form-buttons\">\n          <button type=\"submit\">{{ selectedUser ? 'Update' : 'Add' }}</button>\n          <button type=\"button\" @click=\"cancelEdit\" v-if=\"selectedUser\" class=\"cancel\">Cancel</button>\n        </div>\n      </form>\n    </section>\n\n    <section class=\"users-section\">\n      <h3>Users</h3>\n      <div v-if=\"loading\">Loading users...</div>\n\n      <table v-if=\"!loading\">\n        <thead>\n          <tr>\n            <th>Username</th>\n            <th>Role</th>\n            <th>Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in paginatedUsers\" :key=\"user.id\">\n            <td>{{ user.username }}</td>\n            <td>{{ user.role }}</td>\n            <td>\n              <button @click=\"editUser(user)\">Edit</button>\n              <button @click=\"deleteUser(user.id)\" class=\"danger\">Delete</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div class=\"pagination\">\n        <button @click=\"prevPage\" :disabled=\"page === 1\">Prev</button>\n        <span>Page {{ page }}</span>\n        <button @click=\"nextPage\" :disabled=\"page >= totalPages\">Next</button>\n      </div>\n    </section>\n  </div>\n\n  <div v-else class=\"no-access\">\n    <p>You do not have permission to view this page.</p>\n  </div>\n</template>\n\n<script>\nimport API from '@/api';\n\nexport default {\n  name: 'AdminPanel',\n  data() {\n    return {\n      users: [],\n      formUser: {\n        username: '',\n        password: '',\n        role: 'user',\n      },\n      selectedUser: null,\n      loading: true,\n      page: 1,\n      pageSize: 5,\n    };\n  },\n  computed: {\n    isAdmin() {\n      return this.$store.state.user?.role === 'admin';\n    },\n    paginatedUsers() {\n      const start = (this.page - 1) * this.pageSize;\n      return this.users.slice(start, start + this.pageSize);\n    },\n    totalPages() {\n      return Math.ceil(this.users.length / this.pageSize);\n    },\n  },\n  async mounted() {\n    if (this.isAdmin) {\n      await this.fetchUsers();\n    }\n  },\n  methods: {\n    async fetchUsers() {\n      try {\n        const { data } = await API.get('/users');\n        this.users = data;\n      } catch {\n        alert('Error fetching users');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async addUser() {\n      try {\n        await API.post('/users', this.formUser);\n        this.resetForm();\n        await this.fetchUsers();\n      } catch {\n        alert('Error adding user');\n      }\n    },\n    async updateUser() {\n      try {\n        await API.put(`/users/${this.selectedUser.id}`, this.formUser);\n        this.resetForm();\n        await this.fetchUsers();\n      } catch {\n        alert('Error updating user');\n      }\n    },\n    async deleteUser(userId) {\n      try {\n        await API.delete(`/users/${userId}`);\n        await this.fetchUsers();\n      } catch {\n        alert('Error deleting user');\n      }\n    },\n    editUser(user) {\n      this.selectedUser = user;\n      this.formUser = { ...user, password: '' };\n    },\n    cancelEdit() {\n      this.resetForm();\n    },\n    resetForm() {\n      this.selectedUser = null;\n      this.formUser = { username: '', password: '', role: 'user' };\n    },\n    prevPage() {\n      if (this.page > 1) this.page--;\n    },\n    nextPage() {\n      if (this.page < this.totalPages) this.page++;\n    },\n  },\n};\n</script>\n\n<style scoped>\n.admin-page {\n  max-width: 800px;\n  margin: 2rem auto;\n  padding: 2rem;\n  background-color: #1e1e1e;\n  color: var(--text-color);\n  border-radius: 10px;\n}\n\nform {\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 2rem;\n  gap: 10px;\n}\n\nform input,\nform select {\n  padding: 0.5rem;\n  background-color: var(--sidebar-bg);\n  color: var(--text-color);\n  border: 1px solid var(--text-color);\n  border-radius: 4px;\n}\n\n.form-buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.users-section table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 1rem;\n}\n\n.users-section th,\n.users-section td {\n  padding: 0.75rem;\n  text-align: left;\n  border-bottom: 1px solid var(--sidebar-bg);\n}\n\nbutton {\n  padding: 0.4rem 0.8rem;\n  background-color: var(--link-color);\n  color: var(--header-text);\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\nbutton:hover {\n  background-color: #3a8bde;\n}\n\nbutton.danger {\n  background-color: #e53935;\n}\n\nbutton.danger:hover {\n  background-color: #c62828;\n}\n\nbutton.cancel {\n  background-color: #757575;\n}\n\nbutton.cancel:hover {\n  background-color: #616161;\n}\n\n.pagination {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 1.5rem;\n}\n\n.no-access {\n  text-align: center;\n  padding: 3rem;\n  color: var(--text-color);\n  opacity: 0.8;\n}\n</style>"],"names":["_sfc_main","_a","start","data","API","userId","user","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","$options","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","$data","_withModifiers","$event","_vModelText","_createCommentVNode","_vModelSelect","_toDisplayString","args","_hoisted_6","_hoisted_7","_Fragment","_renderList","_hoisted_13"],"mappings":"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"}