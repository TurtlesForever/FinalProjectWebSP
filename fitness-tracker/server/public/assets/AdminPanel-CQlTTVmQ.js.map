{"version":3,"file":"AdminPanel-CQlTTVmQ.js","sources":["../../src/components/AdminPanel.vue"],"sourcesContent":["<template>\n  <div v-if=\"isAdmin\" class=\"admin-page min-h-screen flex flex-col items-center px-4 py-8 text-white\">\n    <h2 class=\"text-3xl font-semibold mb-8\">Admin Panel</h2>\n\n    <section class=\"form-section w-full max-w-3xl bg-gray-800 p-6 rounded mb-8\">\n      <h3 class=\"text-2xl font-semibold mb-4\">{{ selectedUser ? 'Edit User' : 'Add New User' }}</h3>\n      <form @submit.prevent=\"selectedUser ? updateUser() : addUser\" class=\"space-y-4\">\n        <input v-model=\"formUser.username\" type=\"text\" placeholder=\"Username\" required class=\"w-full p-3 bg-gray-700 border border-gray-600 rounded\" />\n        \n        <input \n          v-if=\"!selectedUser\"\n          v-model=\"formUser.password\" \n          type=\"password\" \n          placeholder=\"Password\" \n          required \n          class=\"w-full p-3 bg-gray-700 border border-gray-600 rounded\" \n        />\n        \n        <select v-model=\"formUser.role\" class=\"w-full p-3 bg-gray-700 border border-gray-600 rounded\">\n          <option value=\"user\">User</option>\n          <option value=\"admin\">Admin</option>\n        </select>\n\n        <div class=\"form-buttons flex gap-4\">\n          <button type=\"submit\" class=\"w-full py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\">{{ selectedUser ? 'Update' : 'Add' }}</button>\n          <button type=\"button\" @click=\"cancelEdit\" v-if=\"selectedUser\" class=\"w-full py-2 bg-gray-600 text-white rounded hover:bg-gray-700\">Cancel</button>\n        </div>\n      </form>\n    </section>\n\n    <section class=\"users-section w-full max-w-3xl\">\n      <h3 class=\"text-2xl font-semibold mb-4\">Users</h3>\n\n      <div v-if=\"loading\" class=\"text-center text-gray-400\">Loading users...</div>\n\n      <table v-if=\"!loading\" class=\"w-full table-auto bg-gray-800 text-white rounded-lg\">\n        <thead>\n          <tr>\n            <th class=\"p-4\">Username</th>\n            <th class=\"p-4\">Role</th>\n            <th class=\"p-4\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in paginatedUsers\" :key=\"user.id\" class=\"border-b border-gray-600\">\n            <td class=\"p-4\">{{ user.username }}</td>\n            <td class=\"p-4\">{{ user.role }}</td>\n            <td class=\"p-4 flex gap-2\">\n              <button @click=\"editUser(user)\" class=\"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\">Edit</button>\n              <button @click=\"deleteUser(user.id)\" class=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700\">Delete</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div class=\"pagination flex justify-between mt-4 text-white\">\n        <button @click=\"prevPage\" :disabled=\"page === 1\" class=\"py-2 px-4 bg-gray-600 rounded hover:bg-gray-700\">Prev</button>\n        <span>Page {{ page }}</span>\n        <button @click=\"nextPage\" :disabled=\"page >= totalPages\" class=\"py-2 px-4 bg-gray-600 rounded hover:bg-gray-700\">Next</button>\n      </div>\n    </section>\n  </div>\n\n  <div v-else class=\"no-access text-center py-8\">\n    <p class=\"text-lg text-gray-400\">You do not have permission to view this page.</p>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue';\nimport API from '@/api';\n\nconst users = ref([]);\nconst formUser = ref({ username: '', password: '', role: 'user' });\nconst selectedUser = ref(null);\nconst loading = ref(true);\nconst page = ref(1);\nconst pageSize = 5;\n\nconst isAdmin = computed(() => {\n  return $store.state.user?.role === 'admin';\n});\n\nconst paginatedUsers = computed(() => {\n  const start = (page.value - 1) * pageSize;\n  return users.value.slice(start, start + pageSize);\n});\n\nconst totalPages = computed(() => {\n  return Math.ceil(users.value.length / pageSize);\n});\n\nconst fetchUsers = async () => {\n  try {\n    const { data } = await API.get('/users');\n    users.value = data;\n  } catch (e) {\n    alert('Error fetching users');\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst addUser = async () => {\n  try {\n    await API.post('/users', formUser.value);\n    resetForm();\n    await fetchUsers();\n  } catch (e) {\n    alert('Error adding user');\n  }\n};\n\nconst updateUser = async () => {\n  try {\n    await API.put(`/users/${selectedUser.value.id}`, formUser.value);\n    resetForm();\n    await fetchUsers();\n  } catch (e) {\n    alert('Error updating user');\n  }\n};\n\nconst deleteUser = async (userId) => {\n  try {\n    await API.delete(`/users/${userId}`);\n    await fetchUsers();\n  } catch (e) {\n    alert('Error deleting user');\n  }\n};\n\nconst editUser = (user) => {\n  selectedUser.value = user;\n  formUser.value = { ...user, password: '' };\n};\n\nconst cancelEdit = () => {\n  resetForm();\n};\n\nconst resetForm = () => {\n  selectedUser.value = null;\n  formUser.value = { username: '', password: '', role: 'user' };\n};\n\nconst prevPage = () => {\n  if (page.value > 1) page.value--;\n};\n\nconst nextPage = () => {\n  if (page.value < totalPages.value) page.value++;\n};\n\nonMounted(() => {\n  if (isAdmin.value) fetchUsers();\n});\n</script>\n\n<style scoped>\n.admin-page {\n  background-color: #1e1e1e;\n  color: var(--text-color);\n}\n</style>"],"names":["pageSize","users","ref","formUser","selectedUser","loading","page","isAdmin","computed","_a","paginatedUsers","start","totalPages","fetchUsers","data","API","addUser","resetForm","updateUser","deleteUser","userId","editUser","user","cancelEdit","prevPage","nextPage","onMounted"],"mappings":"q3BA6EMA,EAAW,oCALjB,MAAMC,EAAQC,EAAI,EAAE,EACdC,EAAWD,EAAI,CAAE,SAAU,GAAI,SAAU,GAAI,KAAM,OAAQ,EAC3DE,EAAeF,EAAI,IAAI,EACvBG,EAAUH,EAAI,EAAI,EAClBI,EAAOJ,EAAI,CAAC,EAGZK,EAAUC,EAAS,IAAM,OAC7B,QAAOC,EAAA,OAAO,MAAM,OAAb,YAAAA,EAAmB,QAAS,OACrC,CAAC,EAEKC,EAAiBF,EAAS,IAAM,CACpC,MAAMG,GAASL,EAAK,MAAQ,GAAKN,EACjC,OAAOC,EAAM,MAAM,MAAMU,EAAOA,EAAQX,CAAQ,CAClD,CAAC,EAEKY,EAAaJ,EAAS,IACnB,KAAK,KAAKP,EAAM,MAAM,OAASD,CAAQ,CAC/C,EAEKa,EAAa,SAAY,CAC7B,GAAI,CACF,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAI,IAAI,QAAQ,EACvCd,EAAM,MAAQa,CACf,MAAW,CACV,MAAM,sBAAsB,CAChC,QAAY,CACRT,EAAQ,MAAQ,EACpB,CACA,EAEMW,EAAU,SAAY,CAC1B,GAAI,CACF,MAAMD,EAAI,KAAK,SAAUZ,EAAS,KAAK,EACvCc,EAAW,EACX,MAAMJ,EAAY,CACnB,MAAW,CACV,MAAM,mBAAmB,CAC7B,CACA,EAEMK,EAAa,SAAY,CAC7B,GAAI,CACF,MAAMH,EAAI,IAAI,UAAUX,EAAa,MAAM,EAAE,GAAID,EAAS,KAAK,EAC/Dc,EAAW,EACX,MAAMJ,EAAY,CACnB,MAAW,CACV,MAAM,qBAAqB,CAC/B,CACA,EAEMM,EAAa,MAAOC,GAAW,CACnC,GAAI,CACF,MAAML,EAAI,OAAO,UAAUK,CAAM,EAAE,EACnC,MAAMP,EAAY,CACnB,MAAW,CACV,MAAM,qBAAqB,CAC/B,CACA,EAEMQ,EAAYC,GAAS,CACzBlB,EAAa,MAAQkB,EACrBnB,EAAS,MAAQ,CAAE,GAAGmB,EAAM,SAAU,EAAI,CAC5C,EAEMC,EAAa,IAAM,CACvBN,EAAW,CACb,EAEMA,EAAY,IAAM,CACtBb,EAAa,MAAQ,KACrBD,EAAS,MAAQ,CAAE,SAAU,GAAI,SAAU,GAAI,KAAM,MAAQ,CAC/D,EAEMqB,EAAW,IAAM,CACjBlB,EAAK,MAAQ,GAAGA,EAAK,OAC3B,EAEMmB,EAAW,IAAM,CACjBnB,EAAK,MAAQM,EAAW,OAAON,EAAK,OAC1C,EAEA,OAAAoB,EAAU,IAAM,CACVnB,EAAQ,OAAOM,EAAY,CACjC,CAAC"}